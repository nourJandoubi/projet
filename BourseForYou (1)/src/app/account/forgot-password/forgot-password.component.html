<app-header></app-header>
<main class="main-content  mt-4">
  <div class="container">
    <div class="row mt-lg-n11 mt-md-n12 mt-n12 justify-content-center">
      <div class="col-xl-9 col-lg-9 col-md-11 mx-auto">
        <div class="card mt-5 mb-5 z-index-0">
              <div class=" card-header text-center p-3">
                <div class="h-100">
                  <h5 class="mb-1">
                    Modifier mot de passe
                  </h5>
                </div>
              </div>
              <div>
                    <p class="mb-0 font-weight-bold text-sm ms-4 pt-2 d-flex justify-content-center">
                      Votre mot de passe doi contenir au moins 6 caractéres ainsi qu'une combinaison de chiffres et de lettres. 
                      </p>
                    <div class="ms-3 me-3 mt-1 pt-1">
                      <form [formGroup]="passwordForm">
                        <div class="form-group">
                            <label for="example-text-input" class="form-control-label">Nouveau mot de passe<span class="text-danger">*</span></label>
                            <div class="password-wrapper">
                            <input class="form-control" [type]=motdepasse1 formControlName="password" name="password">
                            <span [hidden]="eye1" (click)="eyes(1)">
                                <i class="fa fa-eye password-toggle-icon" aria-hidden="true" ></i>
                            </span>
                            <span [hidden]="!eye1" (click)="eyes(1)">
                                <i class="fa fa-eye-slash password-toggle-icon" aria-hidden="true"></i>
                            </span>
                            </div>
                            <div *ngIf="password.invalid  && password.touched"class="mb-3 alert alert-danger alert-dismissible fade show" role="alert">
                                <div *ngIf="password.errors?.['required']">Le mot de passe est obligatoire.</div>
                                <div *ngIf="password.errors?.['minlength'] || password.errors?.['pattern']">Le mot de passe doit comporter au moins 6 caractères et au moins une lettre et un chiffre.</div>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="example-text-input" class="form-control-label">Retaper le nouveau mot de passe<span class="text-danger">*</span></label>
                            <div class="password-wrapper">
                                <input class="form-control" [type]=motdepasse2 formControlName="secondPassword" name="secondPassword">
                                <span [hidden]="eye2" (click)="eyes(2)">
                                    <i class="fa fa-eye password-toggle-icon" aria-hidden="true" ></i>
                                </span>
                                <span [hidden]="!eye2" (click)="eyes(2)">
                                    <i class="fa fa-eye-slash password-toggle-icon" aria-hidden="true"></i>
                                </span>
                            </div>                          
                            <div *ngIf="secondPassword.dirty && verifPassword()"    class=" mb-3 alert alert-danger alert-dismissible fade show" role="alert">
                                <span class="alert-text">Le mot de passe est incorrect !</span>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                           </div>
                        </div>
                        <div class="d-flex justify-content-center mt-3 mb-3 ">
                            <button type="button" class="btn  bg-primary " (click)=" updatePassword() " [disabled]="updateDisabled ||passwordForm.invalid ">
                               Modifier mon mot de passe
                            </button>
                        </div>
                    </form>
                    </div>
              </div>         
            </div>
      </div>
    </div>
  </div>
</main>



